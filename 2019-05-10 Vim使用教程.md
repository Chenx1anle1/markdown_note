# 2019-05-10 Vim使用教程

## Vim

最近又开始鼓捣 raspberry 3 B+..打算拿来搞搞python .学习下
然后要用到Vim.所以记录下.

![img](https://upload-images.jianshu.io/upload_images/1429599-b7c061ff85281d7a.png?imageMogr2/auto-orient/strip|imageView2/2/w/1108/format/webp)

vim键位

### vi/vim 的使用

基本上 vi/vim 共分为三种模式，分别是

- **命令模式（Command mode）**
- **输入模式（Insert mode）**
- **底线命令模式（Last line mode）**

这三种模式的作用分别是：

------

### 命令模式：

用户刚刚启动 vi/vim，便进入了命令模式。

此状态下敲击键盘动作会被Vim识别为命令，而非输入字符。比如我们此时按下i，并不会输入一个字符，i被当作了一个命令。

以下是常用的几个命令：



```undefined
    i 切换到输入模式，以输入字符。
    x 删除当前光标所在处的字符。
    : 切换到底线命令模式，以在最底一行输入命令。
```

若想要编辑文本：启动Vim，进入了命令模式，按下i，切换到输入模式。

命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令。

------

### 输入模式

在命令模式下按下i就进入了输入模式。

在输入模式中，可以使用以下按键：



```ruby
    字符按键以及Shift组合，输入字符
    ENTER，回车键，换行
    BACK SPACE，退格键，删除光标前一个字符
    DEL，删除键，删除光标后一个字符
    方向键，在文本中移动光标
    HOME/END，移动光标到行首/行尾
    Page Up/Page Down，上/下翻页
    Insert，切换光标为输入/替换模式，光标将变成竖线/下划线
    ESC，退出输入模式，切换到命令模式
```

------

### 底线命令模式

在命令模式下按下:（英文冒号）就进入了底线命令模式。

底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。

在底线命令模式中，基本的命令有（已经省略了冒号）：



```undefined
    q 退出程序
    w 保存文件
```

按ESC键可随时退出底线命令模式。

------

#### 一、打开文件、保存、关闭文件(vi命令模式下使用)



```cpp
vi filename       //打开filename文件
:w       //保存文件
:w vpser.net //保存至vpser.net文件
:q          //退出编辑器，如果文件已修改请使用下面的命令
:q!        //退出编辑器，且不保存
:wq         //退出编辑器，且保存文件
```

#### 二、插入文本或行(vi命令模式下使用，执行下面命令后将进入插入模式，按ESC键可退出插入模式)



```cpp
a      //在当前光标位置的右边添加文本
i       //在当前光标位置的左边添加文本
A     //在当前行的末尾位置添加文本
I      //在当前行的开始处添加文本(非空字符的行首)
O     //在当前行的上面新建一行
o     //在当前行的下面新建一行
R    //替换(覆盖)当前光标位置及后面的若干文本
J    //合并光标所在行及下一行为一行(依然在命令模式)
```

#### 三、移动光标(vi命令模式下使用)

1、使用上下左右方向键

2、命令模式下：h 向左、j 向下 、k 向上、l 向右。
空格键 向右、Backspace 向左、Enter 移动到下一行首、- 移动到上一行首。

#### 四、删除、恢复字符或行(vi命令模式下使用)



```cpp
x         //删除当前字符
nx         //删除从光标开始的n个字符
dd      //删除当前行
ndd   //向下删除当前行在内的n行
u       //撤销上一步操作
U      //撤销对当前行的所有操作
```

#### 五、搜索(vi命令模式下使用)



```cpp
/vpser     //向光标下搜索vpser字符串
?vpser     //向光标上搜索vpser字符串
n           //向下搜索前一个搜素动作
N         //向上搜索前一个搜索动作
```

#### 六、跳至指定行(vi命令模式下使用)



```cpp
n+        //向下跳n行
n-         //向上跳n行
nG        //跳到行号为n的行
G           //跳至文件的底部
```

#### 七、设置行号(vi命令模式下使用)



```cpp
:set  nu     //显示行号
:set nonu    //取消显示行号
```

#### 八、复制、粘贴(vi命令模式下使用)



```cpp
yy    //将当前行复制到缓存区，也可以用 "ayy 复制，"a 为缓冲区，a也可以替换为a到z的任意字母，可以完成多个复制任务。
nyy   //将当前行向下n行复制到缓冲区，也可以用 "anyy 复制，"a 为缓冲区，a也可以替换为a到z的任意字母，可以完成多个复制任务。
yw    //复制从光标开始到词尾的字符。
nyw   //复制从光标开始的n个单词。
y^      //复制从光标到行首的内容。  VPS侦探
y$      //复制从光标到行尾的内容。
p        //粘贴剪切板里的内容在光标后，如果使用了前面的自定义缓冲区，建议使用"ap 进行粘贴。
P        //粘贴剪切板里的内容在光标前，如果使用了前面的自定义缓冲区，建议使用"aP 进行粘贴。
```

#### 九、替换(vi命令模式下使用)



```cpp
:s/old/new      //用new替换行中首次出现的old
:s/old/new/g         //用new替换行中所有的old
:n,m s/old/new/g     //用new替换从n到m行里所有的old
:%s/old/new/g      //用new替换当前文件里所有的old
```

#### 十、编辑其他文件



```cpp
:e otherfilename    //编辑文件名为otherfilename的文件。
```

#### 十一、修改文件格式



```cpp
:set fileformat=unix   //将文件修改为unix格式，如win下面的文本文件在linux下会出现^M。
```